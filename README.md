# References

* MSDN Pattern & Practice on Sagas: https://msdn.microsoft.com/en-us/library/jj591569.aspx
* Event Driven Architectures: http://udidahan.com/2009/04/20/saga-persistence-and-event-driven-architectures/
* State Machines, Workflows and Sagas: http://kellabyte.com/2012/05/30/clarifying-the-saga-pattern/
* MassTransit (NServiceBus alternative): http://masstransit.readthedocs.io/en/master/
* Enterprise Patterns / workflows: https://dotnetsilverlightprism.wordpress.com/2015/01/04/powerful-patterns-for-developing-automated-workflows/


## Mass Transit: Message body

### Message Generated by MT 

The actual payload is located inside the **message** property. It is possible to change/adapt the way the messages are formed, it just a matter of naming conventions + serialization tweaks.

More on MT Messages :

* Interop on MT : http://docs.masstransit-project.com/en/latest/advanced/interop.html
* Message format on MT : http://docs.masstransit-project.com/en/latest/overview/keyideas.html

```
#!json

{
  "messageId": "34c00000-f14b-f0de-5d0e-08d3d78aa22a",
  "conversationId": "34c00000-f14b-f0de-64a0-08d3d78aa22a",
  "sourceAddress": "sb://dominosbasket.servicebus.windows.net/THIERRYRAIS_BasketMassTransitvshost_bus_guyyyy8tjxap7im9bdj7xnx3bi?express=true&autodelete=300",
  "destinationAddress": "sb://dominosbasket.servicebus.windows.net/Abt.Result.WebApi.Saga/IOrderStartedEvent",
  "messageType": [
    "urn:message:Abt.Result.WebApi.Saga:IOrderStartedEvent"
  ],
  "message": {
    "timestamp": "2016-09-08T01:51:21.5506191Z",
    "email": "1223222241115"
  },
  "headers": {},
  "host": {
    "machineName": "THIERRYRAIS",
    "processName": "Basket.MassTransit.vshost",
    "processId": 34736,
    "assembly": "Basket.MassTransit",
    "assemblyVersion": "1.0.0.0",
    "frameworkVersion": "4.0.30319.42000",
    "massTransitVersion": "3.4.0.764",
    "operatingSystemVersion": "Microsoft Windows NT 6.2.9200.0"
  }
}
```

### Message Generated Azure Bus Client (Simple JSON serialization) 


```
#!json

#@strin3http://schemas.microsoft.com/2003/10/Serialization/?&

   "Dict":[
      {
         "Key":"key1",
         "Value":{
            "Dict":null,
            "Nested":null,
            "Prop1":"dsadsadadadssadsadasdsadsadasdsadasdsadsadsaddsa",
            "Prop2":"p2 text"
         }
      },
      {
         "Key":"key2",
         "Value":{
            "Dict":null,
            "Nested":null,
            "Prop1":"dsadsadadadssadsadasdsadsadasdsadasdsadsadsaddsa",
            "Prop2":"p2 text"
         }
      },
      {
         "Key":"key3",
         "Value":{
            "Dict":null,
            "Nested":null,
            "Prop1":"dsadsadadadssadsadasdsadsadasdsadasdsadsadsaddsa",
            "Prop2":"p2 text"
         }
      }
   ],
   "Nested":{
      "Dict":null,
      "Nested":null,
      "Prop1":"p1 text",
      "Prop2":"p2 text"
   },
   "Prop1":"Payload written by the standard C# Azure Service Bus Client",
   "Prop2":null
}

```